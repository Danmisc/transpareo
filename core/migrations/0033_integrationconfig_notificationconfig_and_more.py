# Generated by Django 5.2.7 on 2025-11-18 22:04

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0032_replytemplate_propertyclaimmoderation_supportticket_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='IntegrationConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('google_maps_api_key', models.CharField(blank=True, max_length=200, null=True, verbose_name='Clé API Google Maps')),
                ('google_maps_enabled', models.BooleanField(default=False, verbose_name='Google Maps activé')),
                ('google_analytics_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='ID Google Analytics')),
                ('google_analytics_enabled', models.BooleanField(default=False, verbose_name='Google Analytics activé')),
                ('email_service', models.CharField(choices=[('mailchimp', 'Mailchimp'), ('sendinblue', 'Sendinblue'), ('none', 'Aucun')], default='none', max_length=50, verbose_name='Service email')),
                ('email_service_api_key', models.CharField(blank=True, max_length=200, null=True, verbose_name='Clé API service email')),
                ('email_service_list_id', models.CharField(blank=True, max_length=100, null=True, verbose_name='ID liste de diffusion')),
                ('email_service_auto_sync', models.BooleanField(default=False, verbose_name='Sync automatique utilisateurs')),
                ('zapier_webhook_url', models.URLField(blank=True, null=True, verbose_name='URL Webhook Zapier')),
                ('make_webhook_url', models.URLField(blank=True, null=True, verbose_name='URL Webhook Make')),
                ('webhook_events', models.JSONField(blank=True, default=list, verbose_name='Événements déclencheurs webhooks')),
                ('custom_webhooks', models.JSONField(blank=True, default=list, verbose_name='Webhooks personnalisés')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Configuration Intégrations',
                'verbose_name_plural': 'Configuration Intégrations',
            },
        ),
        migrations.CreateModel(
            name='NotificationConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email_enabled_default', models.BooleanField(default=True, verbose_name='Email activé par défaut')),
                ('push_enabled_default', models.BooleanField(default=True, verbose_name='Push navigateur activé par défaut')),
                ('sms_enabled_default', models.BooleanField(default=False, verbose_name='SMS activé par défaut')),
                ('event_notifications', models.JSONField(blank=True, default=dict, verbose_name='Notifications par événement')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Configuration Notifications',
                'verbose_name_plural': 'Configuration Notifications',
            },
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Nom du template')),
                ('subject', models.CharField(max_length=200, verbose_name='Sujet')),
                ('body', models.TextField(verbose_name="Corps de l'email (HTML)")),
                ('variables', models.JSONField(blank=True, default=list, verbose_name='Variables disponibles')),
                ('template_type', models.CharField(choices=[('welcome', 'Bienvenue'), ('confirmation', 'Confirmation'), ('reminder', 'Rappel'), ('alert', 'Alerte'), ('other', 'Autre')], default='other', max_length=50, verbose_name='Type de template')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Template Notification',
                'verbose_name_plural': 'Templates Notifications',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='PaymentConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('stripe_enabled', models.BooleanField(default=False, verbose_name='Stripe activé')),
                ('stripe_public_key', models.CharField(blank=True, max_length=200, null=True, verbose_name='Stripe clé publique')),
                ('stripe_secret_key', models.CharField(blank=True, max_length=200, null=True, verbose_name='Stripe clé secrète')),
                ('paypal_enabled', models.BooleanField(default=False, verbose_name='PayPal activé')),
                ('paypal_client_id', models.CharField(blank=True, max_length=200, null=True, verbose_name='PayPal Client ID')),
                ('paypal_secret', models.CharField(blank=True, max_length=200, null=True, verbose_name='PayPal Secret')),
                ('bank_transfer_enabled', models.BooleanField(default=True, verbose_name='Virement bancaire activé')),
                ('pricing_table', models.JSONField(blank=True, default=list, verbose_name='Grille tarifaire')),
                ('commission_rate_lease', models.DecimalField(decimal_places=2, default=5.0, max_digits=5, verbose_name='Taux commission location (%)')),
                ('commission_rate_services', models.DecimalField(decimal_places=2, default=3.0, max_digits=5, verbose_name='Taux commission services (%)')),
                ('billing_company_name', models.CharField(blank=True, max_length=200, null=True, verbose_name='Nom entreprise facturation')),
                ('billing_siret', models.CharField(blank=True, max_length=14, null=True, verbose_name='SIRET')),
                ('billing_vat', models.CharField(blank=True, max_length=20, null=True, verbose_name='Numéro TVA')),
                ('billing_address', models.TextField(blank=True, null=True, verbose_name='Adresse facturation')),
                ('invoice_template', models.TextField(blank=True, null=True, verbose_name='Template facture')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Configuration Paiements',
                'verbose_name_plural': 'Configuration Paiements',
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Nom du rôle')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Description')),
                ('can_view_users', models.BooleanField(default=False, verbose_name='Voir utilisateurs')),
                ('can_edit_users', models.BooleanField(default=False, verbose_name='Éditer utilisateurs')),
                ('can_delete_users', models.BooleanField(default=False, verbose_name='Supprimer utilisateurs')),
                ('can_view_properties', models.BooleanField(default=False, verbose_name='Voir logements')),
                ('can_edit_properties', models.BooleanField(default=False, verbose_name='Éditer logements')),
                ('can_delete_properties', models.BooleanField(default=False, verbose_name='Supprimer logements')),
                ('can_view_moderation', models.BooleanField(default=False, verbose_name='Voir modération')),
                ('can_treat_moderation', models.BooleanField(default=False, verbose_name='Traiter modération')),
                ('can_view_business', models.BooleanField(default=False, verbose_name='Voir business')),
                ('can_edit_business', models.BooleanField(default=False, verbose_name='Éditer business')),
                ('can_view_finance', models.BooleanField(default=False, verbose_name='Voir finance')),
                ('can_edit_finance', models.BooleanField(default=False, verbose_name='Éditer finance')),
                ('can_view_settings', models.BooleanField(default=False, verbose_name='Voir paramètres')),
                ('can_edit_settings', models.BooleanField(default=False, verbose_name='Éditer paramètres')),
                ('can_view_analytics', models.BooleanField(default=False, verbose_name='Voir analytics')),
                ('can_export_analytics', models.BooleanField(default=False, verbose_name='Exporter analytics')),
                ('is_system', models.BooleanField(default=False, verbose_name='Rôle système (non modifiable)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Rôle',
                'verbose_name_plural': 'Rôles',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='SecurityConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('two_factor_required_admins', models.BooleanField(default=False, verbose_name='2FA obligatoire pour admins')),
                ('session_duration_minutes', models.IntegerField(default=1440, verbose_name='Durée session (minutes)')),
                ('password_min_length', models.IntegerField(default=8, verbose_name='Longueur minimum mot de passe')),
                ('password_require_uppercase', models.BooleanField(default=True, verbose_name='Requis majuscule')),
                ('password_require_lowercase', models.BooleanField(default=True, verbose_name='Requis minuscule')),
                ('password_require_number', models.BooleanField(default=True, verbose_name='Requis chiffre')),
                ('password_require_special', models.BooleanField(default=False, verbose_name='Requis caractère spécial')),
                ('admin_allowed_ips', models.JSONField(blank=True, default=list, verbose_name='IPs autorisées admin')),
                ('api_rate_limit', models.IntegerField(default=100, verbose_name='Limite requêtes API/minute')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
            ],
            options={
                'verbose_name': 'Configuration Sécurité',
                'verbose_name_plural': 'Configuration Sécurité',
            },
        ),
        migrations.CreateModel(
            name='AdminInvitation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('token', models.CharField(max_length=100, unique=True, verbose_name="Token d'invitation")),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('accepted', 'Acceptée'), ('expired', 'Expirée'), ('cancelled', 'Annulée')], default='pending', max_length=20, verbose_name='Statut')),
                ('expires_at', models.DateTimeField(verbose_name="Date d'expiration")),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name="Date d'invitation")),
                ('accepted_at', models.DateTimeField(blank=True, null=True, verbose_name="Date d'acceptation")),
                ('accepted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invitations_accepted', to=settings.AUTH_USER_MODEL, verbose_name='Accepté par')),
                ('invited_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invitations_sent', to=settings.AUTH_USER_MODEL, verbose_name='Invité par')),
                ('role', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.role', verbose_name='Rôle')),
            ],
            options={
                'verbose_name': 'Invitation Admin',
                'verbose_name_plural': 'Invitations Admin',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Settings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('site_name', models.CharField(default='Transpareo', max_length=200, verbose_name='Nom du site')),
                ('site_logo', models.ImageField(blank=True, null=True, upload_to='settings/logo/', verbose_name='Logo')),
                ('site_favicon', models.ImageField(blank=True, null=True, upload_to='settings/favicon/', verbose_name='Favicon')),
                ('site_description', models.TextField(blank=True, null=True, verbose_name='Description')),
                ('contact_email', models.EmailField(default='contact@transpareo.fr', max_length=254, verbose_name='Email de contact')),
                ('contact_phone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Téléphone')),
                ('default_language', models.CharField(choices=[('fr', 'Français'), ('en', 'English'), ('es', 'Español')], default='fr', max_length=10, verbose_name='Langue par défaut')),
                ('default_currency', models.CharField(choices=[('EUR', 'EUR (€)'), ('USD', 'USD ($)'), ('GBP', 'GBP (£)')], default='EUR', max_length=3, verbose_name='Devise')),
                ('timezone', models.CharField(default='Europe/Paris', max_length=50, verbose_name='Fuseau horaire')),
                ('date_format', models.CharField(default='DD/MM/YYYY', max_length=20, verbose_name='Format de date')),
                ('maintenance_mode', models.BooleanField(default=False, verbose_name='Mode maintenance')),
                ('maintenance_message', models.TextField(blank=True, null=True, verbose_name='Message de maintenance')),
                ('maintenance_allowed_ips', models.JSONField(blank=True, default=list, verbose_name='IPs autorisées en maintenance')),
                ('primary_color', models.CharField(default='#D3580B', max_length=7, verbose_name='Couleur primaire')),
                ('secondary_color', models.CharField(default='#1F2937', max_length=7, verbose_name='Couleur secondaire')),
                ('font_family', models.CharField(choices=[('Geist', 'Geist'), ('Inter', 'Inter'), ('Roboto', 'Roboto'), ('Arial', 'Arial')], default='Geist', max_length=50, verbose_name='Police principale')),
                ('header_logo', models.ImageField(blank=True, null=True, upload_to='settings/header/', verbose_name='Logo header')),
                ('cgu_content', models.TextField(blank=True, null=True, verbose_name='CGU')),
                ('privacy_policy_content', models.TextField(blank=True, null=True, verbose_name='Politique de confidentialité')),
                ('legal_notices_content', models.TextField(blank=True, null=True, verbose_name='Mentions légales')),
                ('faq_data', models.JSONField(blank=True, default=list, verbose_name='FAQ (liste question/réponse)')),
                ('meta_title', models.CharField(blank=True, max_length=200, null=True, verbose_name='Meta title')),
                ('meta_description', models.TextField(blank=True, null=True, verbose_name='Meta description')),
                ('meta_keywords', models.JSONField(blank=True, default=list, verbose_name='Mots-clés')),
                ('sitemap_auto_generate', models.BooleanField(default=True, verbose_name='Génération automatique sitemap')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière modification')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='settings_updated', to=settings.AUTH_USER_MODEL, verbose_name='Modifié par')),
            ],
            options={
                'verbose_name': 'Paramètres Généraux',
                'verbose_name_plural': 'Paramètres Généraux',
            },
        ),
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('login', 'Connexion'), ('logout', 'Déconnexion'), ('create', 'Création'), ('update', 'Modification'), ('delete', 'Suppression'), ('view', 'Consultation'), ('export', 'Export'), ('other', 'Autre')], max_length=50, verbose_name='Action')),
                ('resource_type', models.CharField(choices=[('user', 'Utilisateur'), ('property', 'Logement'), ('settings', 'Paramètres'), ('moderation', 'Modération'), ('ticket', 'Ticket'), ('business', 'Business'), ('finance', 'Finance'), ('other', 'Autre')], max_length=50, verbose_name='Type de ressource')),
                ('resource_id', models.IntegerField(blank=True, null=True, verbose_name='ID ressource')),
                ('resource_name', models.CharField(blank=True, max_length=200, null=True, verbose_name='Nom ressource')),
                ('details', models.JSONField(blank=True, default=dict, verbose_name='Détails (JSON)')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='Adresse IP')),
                ('user_agent', models.TextField(blank=True, null=True, verbose_name='User Agent')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date/heure')),
                ('admin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_logs', to=settings.AUTH_USER_MODEL, verbose_name='Admin')),
            ],
            options={
                'verbose_name': "Log d'Activité",
                'verbose_name_plural': "Logs d'Activité",
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['admin', '-created_at'], name='core_activi_admin_i_f36e28_idx'), models.Index(fields=['action', '-created_at'], name='core_activi_action_a01617_idx'), models.Index(fields=['resource_type', '-created_at'], name='core_activi_resourc_29e3a9_idx')],
            },
        ),
    ]
