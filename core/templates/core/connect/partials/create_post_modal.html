{% load static %}

<!-- Modal Création Post -->
<div class="modal-overlay" id="create-post-modal" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>Créer un post</h2>
            <button class="modal-close" onclick="closeCreatePostModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        
        <div class="modal-body">
            <!-- Header modal avec avatar et visibilité -->
            <div class="create-post-modal-header">
                {% if user.avatar %}
                <img src="{{ user.avatar.url }}" alt="{{ user.username }}" class="modal-user-avatar">
                {% else %}
                <div class="modal-user-avatar placeholder">{{ user.username|first|upper }}</div>
                {% endif %}
                <div class="modal-user-info">
                    <strong>{{ user.get_full_name|default:user.username }}</strong>
                    <select class="visibility-select" id="post-visibility">
                        <option value="public">Public</option>
                        <option value="connections">Connexions seulement</option>
                        <option value="group">Groupe spécifique</option>
                    </select>
                </div>
            </div>
            
            <!-- Zone édition -->
            <div class="create-post-editor">
                <textarea id="post-content-textarea" 
                          class="post-textarea" 
                          placeholder="Partagez vos idées, expériences..."
                          rows="3"
                          maxlength="3000"></textarea>
                <div class="char-counter">
                    <span id="char-count">0</span>/3000
                </div>
            </div>
            
            <!-- Zone médias -->
            <div class="create-post-media" id="post-media-zone" style="display: none;">
                <div class="media-preview-grid" id="media-preview-grid"></div>
            </div>
            
            <!-- Zone sondage -->
            <div class="create-post-poll" id="post-poll-zone" style="display: none;">
                <input type="text" class="poll-question-input" placeholder="Question du sondage" id="poll-question">
                <div class="poll-options" id="poll-options">
                    <input type="text" class="poll-option-input" placeholder="Option 1">
                    <input type="text" class="poll-option-input" placeholder="Option 2">
                </div>
                <button class="btn-add-option" onclick="addPollOption()">+ Ajouter option</button>
                <select class="poll-duration" id="poll-duration">
                    <option value="1">1 jour</option>
                    <option value="3">3 jours</option>
                    <option value="7" selected>7 jours</option>
                    <option value="14">14 jours</option>
                    <option value="30">30 jours</option>
                </select>
            </div>
            
            <!-- Zone événement -->
            <div class="create-post-event" id="post-event-zone" style="display: none;">
                <input type="text" class="event-title-input" placeholder="Titre de l'événement" id="event-title">
                <input type="datetime-local" class="event-datetime-input" id="event-datetime">
                <input type="text" class="event-location-input" placeholder="Lieu ou 'En ligne'" id="event-location">
                <textarea class="event-description-input" placeholder="Description courte (max 300 caractères)" maxlength="300" id="event-description"></textarea>
            </div>
            
            <!-- Zone article -->
            <div class="create-post-article" id="post-article-zone" style="display: none;">
                <input type="text" class="article-title-input" placeholder="Titre de l'article (max 100 caractères)" maxlength="100" id="article-title">
                <div class="article-cover-upload">
                    <label>Image de couverture</label>
                    <input type="file" accept="image/*" id="article-cover" onchange="previewArticleCover(event)">
                    <div class="cover-preview" id="cover-preview"></div>
                </div>
                <div class="article-editor" id="article-editor" contenteditable="true" placeholder="Écrivez votre article..."></div>
            </div>
        </div>
        
        <div class="modal-footer">
            <div class="modal-footer-actions">
                <button class="footer-action-btn" data-type="photo" onclick="togglePostType('photo')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    Photo
                </button>
                <button class="footer-action-btn" data-type="video" onclick="togglePostType('video')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                    Vidéo
                </button>
                <button class="footer-action-btn" data-type="event" onclick="togglePostType('event')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Événement
                </button>
                <button class="footer-action-btn" data-type="poll" onclick="togglePostType('poll')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                    Sondage
                </button>
                <button class="footer-action-btn" data-type="article" onclick="togglePostType('article')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                    Article
                </button>
            </div>
            <div class="modal-footer-buttons">
                <button class="btn-secondary" onclick="saveDraft()">Enregistrer brouillon</button>
                <button class="btn-primary" id="publish-post-btn" onclick="publishPost()" disabled>Publier</button>
            </div>
        </div>
    </div>
</div>


