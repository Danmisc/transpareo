{% extends 'core/auth_base.html' %}

{% block title %}Mot de passe oublié - Transpareo{% endblock %}

{% block content %}
<div class="auth-form">
    <h1>Mot de passe oublié ?</h1>
    <p class="subtitle">Entrez votre email pour recevoir un lien de réinitialisation</p>

    <form method="post" novalidate id="reset-form">
        {% csrf_token %}
        
        <!-- Email -->
        <div class="form-group">
            <label for="{{ form.email.id_for_label }}">Email</label>
            <div class="input-wrapper">
                {{ form.email }}
            </div>
            {% if form.email.errors %}
                <ul class="errorlist">
                    {% for error in form.email.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        
        <!-- reCAPTCHA (si présent) -->
        {% if form.captcha %}
        <div class="form-group">
            {{ form.captcha }}
            {% if form.captcha.errors %}
                <ul class="errorlist">
                    {% for error in form.captcha.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
        {% endif %}
        
        <!-- Submit -->
        <button type="submit" class="btn" id="submit-btn">
            <span id="submit-text">Envoyer le lien</span>
            <div class="loading-spinner" id="loading-spinner" style="display: none;"></div>
        </button>
    </form>

    <div class="auth-links">
        <a href="{% url 'login' %}">← Retour à la connexion</a>
        <a href="{% url 'signup' %}">Créer un compte</a>
    </div>
</div>

<script>
// Loading state
document.getElementById('reset-form').addEventListener('submit', function() {
    const btn = document.getElementById('submit-btn');
    const text = document.getElementById('submit-text');
    const spinner = document.getElementById('loading-spinner');
    
    btn.disabled = true;
    text.style.display = 'none';
    spinner.style.display = 'inline-block';
});
</script>
{% endblock %}
